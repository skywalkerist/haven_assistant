# 中国式人生 - 游戏机制文档 v2.0

## 1. 游戏概述

《中国式人生》是一个基于真实数据和统计学的人生模拟游戏，玩家需要管理多代家族的经济发展和人物成长。游戏采用回合制年份推进，每个人生节点的选择都将影响角色属性、收入和家族整体发展轨迹。

### 核心目标
- 🏠 维持家族经济平衡，避免破产（负债超过30万）
- 👨‍👩‍👧‍👦 培养优秀后代，实现多代传承
- 💰 通过合理规划实现财富增长和社会阶层跃升
- 🎓 在教育投资与经济压力间找到平衡

## 2. 核心机制

### 2.1 时间系统
- **游戏速度**: 3秒 = 游戏中1年
- **年份推进**: 自动推进，可随时暂停
- **事件触发**: 基于年龄触发各种人生事件
- **优先级**: 重要事件（升职、退休、毕业）优先处理，一年只处理一个

### 2.2 经济系统
#### 初始财富分布（指数衰减模型）
- **基准值**: 50万元
- **分布规律**:
  - 50%概率: 40-60万元（中产阶级）
  - 30%概率: 10-40万元（工薪阶层）
  - 20%概率: 60万-1000万元（富裕阶层，指数衰减）

#### 破产机制
- **破产线**: 负债30万元（-300,000元）
- **缓冲机制**: 负债30万内可继续游戏
- **资产变现**: 拥有学区房时自动出售救急
- **游戏结束**: 破产或全族死亡时显示统计结果

### 2.3 属性系统
#### 三大核心属性（0-100）
所有属性采用正态分布生成（均值50，标准差15）：

- **🏥 健康 (Health)**
  - 影响医疗支出和寿命
  - 70岁后每年自动-3
  - 健康<70时医疗支出指数增长：(70-健康)²×10元

- **💎 魅力 (Charm)** 
  - 影响婚恋成功率
  - 影响特定职业（销售、保险等）的升职率
  - 部分事件可提升魅力值

- **🧠 智力 (Intelligence)**
  - 决定高考成绩和学历档次
  - 影响求职成功率和升职概率
  - 学区房每年为未成年人+1智力

## 3. 教育系统

### 3.1 高考机制
#### 计算公式
- **基础分**: 以(智力-10)为均值的正态分布
- **恋爱影响**: 高中恋爱使标准差从15增加到20
- **学历档次**:
  - 75-100分 → 985大学
  - 50-74分 → 211大学  
  - 25-49分 → 双非一本
  - 0-24分 → 二本

#### 专业选择
- 从34个专业中随机提供4个选择
- 涵盖工程、医学、经济、艺术等各领域
- 专业影响后续求职匹配度

### 3.2 研究生教育
#### 考研成功率
- 双非: 40%
- 211: 65%  
- 985: 90%
- 二本: 30%

#### 学制与收益
- 学制: 2年
- 毕业后自动进入求职状态
- 求职时薪资基础+3万/年

### 3.3 辍学机制
#### 辍学时机
- 12岁: 小升初时可选择辍学（初中学历）
- 16岁: 高中选择时可选择辍学（高中学历）

#### 就业影响
- 初中辍学: 入职薪资减半，成功率=(智力+魅力)/200
- 高中辍学: 入职薪资×2/3，成功率=(智力+魅力)/100

## 4. 职业系统

### 4.1 职业数据库（31个职业）
#### 高薪技术类
| 职业 | 年薪范围 | 学历要求 | 主要专业 |
|------|----------|----------|----------|
| 软件工程师 | 15-40万 | 本科 | 计算机、软件工程 |
| 网络安全工程师 | 18-40万 | 本科 | 网络安全、计算机 |
| 数据分析师 | 15-35万 | 本科 | 统计学、数学 |

#### 医疗健康类
| 职业 | 年薪范围 | 学历要求 | 主要专业 |
|------|----------|----------|----------|
| 医生（临床） | 20-50万 | 硕士 | 临床医学 |
| 兽医 | 9-22万 | 硕士 | 动物医学 |

#### 特殊职业
- **体力活**: 2.5万/年，90%成功率，无升职，求职时必然出现
- **企业家**: 20-200万/年，每年收入+1万，特殊创业途径获得

### 4.2 求职机制
#### 工作选择生成
1. **体力活** - 必然出现选项
2. **专业对口** - 有专业时必然出现匹配工作
3. **随机工作** - 填充至3个选项

#### 成功率计算
**基础成功率**: 50%
**学历加成**:
- 211: +10%
- 985: +20%  
- 硕士且非硕士要求职位: +10%

**专业匹配**: 不对口-15%
**特殊处理**: 体力活90%成功率

### 4.3 升职系统
#### 升职条件
- 工作满3年后，每3年一次升职机会
- 体力活无法升职
- 退休后不再升职

#### 升职成功率
**普通职业**: (智力/5 + 魅力/3) + 学历加成
**特殊职业**（销售类): (智力/10 + 魅力/1.5)
**学历加成**: 211(+5%), 985(+8%), 硕士(+5%)

#### 升职收益
- 薪资增加: (最高薪资-最低薪资) × 10%
- 健康-2（工作压力）
- 薪资上限为该职业最高薪资

## 5. 婚恋生育系统

### 5.1 择偶机制
#### 触发条件
- 25岁后未婚人士
- 每年30%概率触发择偶事件

#### 配对算法
- 生成3个候选对象（年龄±3岁）
- **吸引力评分**: MAX(健康,魅力,智力) + 年收入/万×2
- **成功率**: 自身魅力 ÷ 对方吸引力评分

### 5.2 生育机制
#### 生育条件
- 结婚满1年后可选择生育
- 女方40岁以下，男方配偶45岁以下
- 每年20%概率触发生育事件

#### 成功率与影响
- **成功率**: (夫妻健康值平均值) ÷ 100
- **母亲影响**: 女方生育后健康-5
- **费用**: 5万元/次

### 5.3 遗传机制
#### 婴儿属性生成
- **50%概率**: 继承父母均值（±5随机变化）
- **50%概率**: 完全随机生成（正态分布）
- **属性范围**: 60-100（确保基础素质）

## 6. 支出系统

### 6.1 生活支出（正态分布）
#### 未成年人（<18岁）
- **均值**: 1.5万/年
- **标准差**: 2250元（均值的15%）
- **最低**: 5000元

#### 成年人（≥18岁）  
- **均值**: 2.8万/年
- **标准差**: 4200元（均值的15%）
- **最低**: 1万元

### 6.2 医疗支出
健康值<70时额外支出：**(70-健康)² × 10**元
- 健康60: 额外1000元
- 健康50: 额外4000元  
- 健康30: 额外16000元

### 6.3 ~~子女抚养费~~（已删除）
原版本的子女抚养费系统已完全移除，简化了经济模型。

## 7. 资产系统

### 7.1 学区房机制
#### 购买与效果
- **价格**: 30万元（小学择校时）
- **效果**: 全家族未成年人每年智力+1
- **传承**: 家族共有资产，跨代受益

#### 变现机制
- 破产危机时自动出售
- **售价**: 原价-5万 ± 15%的正态分布
- 为家族提供最后的经济缓冲

## 8. 事件系统

### 8.1 事件分类
#### 重要事件（必然触发）
- **教育节点**: 高考、读研选择、毕业求职
- **职业发展**: 升职（每3年）、65岁强制退休
- **人生大事**: 择偶、生育
- **特殊处理**: 一年只处理一个重要事件

#### 随机事件（概率触发）
按人生阶段分类，每个事件都有特定的触发年龄和概率。

### 8.2 人生阶段事件

#### 🍼 婴幼儿期（0-5岁）
- **0岁 - 早教班** (80%): 3万元，智力+1，魅力+1
- **3岁 - 幼儿园择校** (90%): 
  - 公立: 1500元
  - 国际双语: 2万元，智力+2，魅力+2

#### 📚 小学阶段（6-11岁）  
- **6岁 - 小学择校** (100%):
  - 普通小学: 免费
  - 买学区房: 30万，家族智力加成
  - 国际小学: 40万，智力+8，魅力+4
- **奇数年龄 - 课外补习** (60%):
  - 常规补习: 1万，智力+2，健康-1
  - 奥数班: 1万，智力+5，魅力-3，健康-3
  - 兴趣班: 3万，智力+1，魅力+3，健康-1

#### 🎓 中学阶段（12-17岁）
- **12岁 - 小升初** (80%):
  - 对口初中: 免费
  - 民办牛校: 15万，智力+4
  - **辍学就业**: 免费，变为初中学历
- **15岁 - 高中选择** (20%):
  - 普通高中: 免费  
  - 国际高中: 45万，智力+3，魅力+6
  - 重点高中: 1万，智力+6，魅力+3（需智力>70）
  - **辍学就业**: 免费，变为高中学历
- **16岁 - 高中恋爱** (50%): 影响高考成绩方差

#### 🏛️ 大学阶段（18-21岁）
- **18岁 - 高考** (必然): 根据智力和专业选择学校
- **20岁 - 大学创业** (20%): 成功率=(智力+魅力)/400

#### 💼 职场阶段（22-45岁）
- **22岁 - 读研选择** (双非以上): 考研 vs 就业
- **32岁 - 副业投资** (40%):
  - 炒股: 10万投入，50%概率获得20万
  - 奶茶店: 15万投入，25%概率年收入+2.5万
- **45岁 - 中年危机** (80%):
  - 混日子: 收入减少20%（最多5万）
  - 跳槽创业: 30万投入，30%成为企业家

#### 🌅 中老年阶段（50岁以上）
- **50岁 - 父母养老** (60%): 每年6-10万支出
- **65岁 - 强制退休** (必然): 收入变为5万/年养老金
- **65岁 - 环球旅行** (30%): 20万，魅力+3，健康+1

### 8.3 随机小事件
#### 日常事件（低频触发）
- **健身年卡** (2%): 1万，健康+1，魅力+1
- **买彩票** (3%): 200元，1%概率中奖500万
- **医美抗衰** (4%): 2万，魅力+2，健康-1  
- **健康作息** (5%): 5000元，健康+1

#### 突发事件
- **重病** (65岁后5%): 不治疗健康-30，优化治疗50万健康-5
- **意外事故** (0.08%): 健康-100

## 9. 游戏平衡性

### 9.1 经济平衡
#### 投资回报周期
- **教育投资**: 前期高成本，后期高回报（学历影响终身收入）
- **学区房**: 30万投入，多代受益，危机时可变现
- **医疗保健**: 预防性支出降低后期医疗成本

#### 风险收益比
- **稳定路径**: 公务员、国企（低风险低收益）
- **高风险路径**: 创业、投资（高风险高收益）
- **技能路径**: 985+技术专业（中风险高收益）

### 9.2 社会阶层流动
#### 向上流动路径
1. **教育跃升**: 985→高薪技术职业→财富积累
2. **创业成功**: 大学创业或中年创业→企业家
3. **投资理财**: 副业投资成功→被动收入

#### 向下流动风险
1. **教育失败**: 辍学→低薪职业→贫困循环
2. **健康问题**: 医疗支出激增→财务危机
3. **投资失败**: 创业失败、炒股亏损→负债

### 9.3 多代传承机制
#### 代际优势传递
- **学区房效应**: 智力代际提升
- **经济基础**: 避免后代教育投资压力
- **属性遗传**: 优秀基因50%概率传承

#### 风险分散
- **多子女策略**: 降低单一后代失败风险
- **多元化发展**: 不同职业路径分散风险

## 10. 技术实现

### 10.1 数学模型
#### 正态分布生成（Box-Muller变换）
```javascript
generateNormalDistribution(mean, stdDev) {
  // Box-Muller变换生成正态分布
  const z = sqrt(-2 * ln(u)) * cos(2π * v)
  return max(0, min(100, z * stdDev + mean))
}
```

#### 经济支出模型
- 未成年人: N(15000, 2250²) + 健康惩罚
- 成年人: N(28000, 4200²) + 健康惩罚
- 健康惩罚: (70-health)² × 10

### 10.2 事件优先级系统
```javascript
checkLifeEvents(person) {
  // 优先处理重要事件（升职、退休、毕业）
  const importantEvents = getImportantEvents(age, person)
  if (importantEvents.length > 0) {
    return handleImportantEvent(importantEvents[0])
  }
  
  // 再处理随机事件
  handleRandomEvents(person)
}
```

### 10.3 家族树可视化
- 使用Vue组件递归渲染多代关系
- 自动分代布局，夫妻关系连线
- 防重复显示的key值管理

## 11. 游戏特色

### 11.1 真实性
- **基于真实数据**: 职业薪资、教育成本、生活支出均参考现实
- **统计学建模**: 使用正态分布模拟真实世界的随机性
- **中国特色**: 高考、学区房、养老等具有中国特色的人生体验

### 11.2 策略性
- **长期规划**: 需要平衡当前消费和未来投资
- **风险管理**: 多种路径选择，风险收益权衡
- **代际思维**: 为子女教育投资，实现阶层跃升

### 11.3 教育意义
- **人生规划启示**: 展示不同选择的长期影响
- **财务知识**: 投资理财、风险控制概念
- **社会认知**: 理解教育、职业、家庭对人生的影响

---

## 12. 版本更新日志

### v2.0 更新内容
✅ 修复升职系统重复执行问题
✅ 修复65岁强制退休机制  
✅ 修复工作年限计算错误
✅ 修复企业家收入增长标记缺失
✅ 优化事件优先级，避免同年冲突
✅ 移除子女抚养费系统，简化经济模型
✅ 增加体力活职业作为就业安全网
✅ 完善辍学就业机制

### 游戏数据统计
- 🎓 **34个专业** 覆盖各行各业  
- 💼 **31个职业** 真实薪资数据
- 🎮 **80+人生事件** 丰富的选择体验
- 📊 **正态分布建模** 科学的随机性
- 👥 **多代传承** 家族经营玩法

*本文档完整记录了《中国式人生》v2.0的所有游戏机制，适用于玩家参考和开发维护。*