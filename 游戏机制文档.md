# 中国式人生 - 游戏机制文档

## 1. 游戏概述

这是一个中国式人生模拟游戏，玩家需要管理家族的经济和人物发展。游戏以年为单位推进，玩家需要在人生的各个关键节点做出选择，这些选择将影响人物的属性、收入和家族的整体发展。

### 核心目标
- 维持家族经济平衡，避免破产
- 培养优秀的后代，提升家族实力
- 在各种人生选择中找到最优策略

## 2. 核心机制

### 2.1 时间系统 【已实现】
- **游戏速度**: 每2秒（2000ms）= 游戏中的1年
- **年份推进**: 自动推进，可暂停
- **时间单位**: 以年龄为基准触发各种事件
### 2.2 经济系统 【已实现】
- **初始财富**: 50万为基准的指数衰减分布
  - 50%概率: 40-60万（中等收入）
  - 30%概率: 10-40万（较低收入）  
  - 20%概率: 60万以上（较高收入，最高1000万）

### 2.3 破产机制 【已实现】
- **破产线**: 负债30万元（-300,000）
- **债务容忍**: 可负债30万内继续游戏
- **破产后果**: 游戏结束，显示游戏时长

## 3. 人物系统

### 3.1 基础属性
每个人物都有以下核心属性：

#### 基本信息
- **姓名**: 随机生成（姓氏+名字组合）
- **年龄**: 从0岁开始，每年+1
- **性别**: 男/女（随机）
- **生存状态**: isAlive（80岁或健康≤0时死亡）
### 重要人生事件 【已实现】
1. **高考**：在18岁时发生，根据智力采样获得学校档次，学校分为二本、双非、211、985四类。采样算法为以智力-10为均值的正态分布，0-24分二本，25-49分双非，50-74分211，75-100分985。专业从40+个专业中随机选择4个供选择。

2. **就业与读研**：22岁时，双非及以上可选择读研，成功率为：双非40%，211为65%，985为90%。另外在12岁和16岁可选择辍学就业。

3. **辍学处理**：辍学后自动进入找工作状态，学历标记为初中或高中。
### 30个社会常见职业系统 【已实现】
| 职业                | 年薪范围（人民币）   | 主要相关专业                     | 学历要求       |
|---------------------|---------------------|----------------------------------|---------------|
| **软件工程师**       | 15万-40万+         | 计算机科学与技术、软件工程       | 本科          |
| **医生（临床）**     | 20万-50万+         | 临床医学                         | 硕士          |
| **中小学教师**       | 8万-25万           | 师范类、学科相关专业             | 本科          |
| **会计师**          | 10万-30万          | 会计学、财务管理                 | 本科          |
| **市场营销经理**     | 12万-35万          | 市场营销、工商管理               | 本科          |
| **土木工程师**       | 10万-25万          | 土木工程、建筑学                 | 本科          |
| **人力资源专员**     | 8万-20万           | 人力资源管理、心理学             | 本科          |
| **平面设计师**       | 8万-18万           | 视觉传达设计、数字媒体艺术       | 本科以下      |
| **销售代表**         | 6万-25万+（含提成）| 不限（市场营销优先）             | 本科以下      |
| **电气工程师**       | 12万-28万          | 电气工程及其自动化               | 本科          |
| **护士**            | 8万-18万           | 护理学                           | 本科以下      |
| **新媒体运营**       | 7万-20万           | 新闻传播、网络与新媒体           | 本科          |
| **机械工程师**       | 10万-25万          | 机械设计制造及其自动化           | 本科          |
| **公务员**          | 8万-15万        | 专业不限（需通过考试）           | 本科          |
| **电商运营**         | 8万-22万           | 电子商务、市场营销               | 本科以下      |
| **律师**            | 15万-50万+         | 法学（需通过法考）               | 本科          |
| **项目经理**         | 18万-45万          | 工程管理/工商管理/行业相关       | 本科          |
| **UI/UX设计师**      | 12万-30万          | 交互设计、工业设计               | 本科          |
| **数据分析师**       | 15万-35万          | 统计学、计算机、数学             | 本科          |
| **网络安全工程师**   | 18万-40万+         | 网络安全、计算机科学与技术       | 本科          |
| **金融分析师**       | 18万-45万+         | 金融学、经济学、统计学           | 硕士          |
| **心理咨询师**       | 8万-30万+          | 心理学、应用心理学               | 本科          |
| **建筑设计师**       | 12万-35万          | 建筑学、城乡规划                 | 本科          |
| **供应链管理**       | 10万-28万          | 物流管理、供应链管理             | 本科          |
| **空乘人员**        | 8万-20万           | 航空服务、旅游管理               | 本科以下      |
| **食品研发工程师**   | 10万-25万          | 食品科学与工程、生物技术         | 本科          |
| **兽医**            | 9万-22万           | 动物医学                         | 硕士          |
| **保险顾问**        | 6万-50万+（高提成）| 金融学、市场营销                 | 本科以下      |
| **健身教练**        | 5万-25万+（私教）  | 体育教育、运动康复               | 本科以下      |
| **碳排放管理员**     | 15万-40万+         | 环境工程、能源经济               | 本科          |
### 职业发展系统 【已实现】
**求职机制**：每年提供三个工作选择，学历要求严格匹配。入职成功率基础50%，211学历+10%，985学历+20%，学历高于要求+10%，专业不对口-15%。

**升职系统**：入职最低工资，硕士+3万/年。每三年一次升职机会。
- 普通职业：智力/5+魅力/3，211+5%，985+8%，硕士+5%
- 特殊职业（保险顾问、健身教练、销售代表、空乘）：智力/10+魅力/1.5，学历无加分

**薪资增长**：每次升职增加最高最低工资差的10%。

### 婚恋生育系统 【已实现】
**择偶**：25岁后未婚人士每年有机会择偶，对象年龄±3岁。求偶变量=最高属性+年收入/万×2，成功率=魅力/求偶变量。

**生育**：结婚一年后可选择生育，成功率=(双方健康平均值)/100。孩子属性：70%概率为父母平均，30%随机。母亲生育后健康-5。

### 退休与死亡 【已实现】
**退休**：65岁退休，退休金=退休前工资的1/4。
**死亡**：健康≤0或年龄过高死亡。70岁后每年健康自动-3。
#### 三大核心属性（0-100）【已实现】
- **健康 (health)**: 影响医疗支出和寿命
- **魅力 (charm)**: 影响婚恋成功率和部分收入
- **智力 (intelligence)**: 影响教育机会和工作收入
- **属性生成**: 三者都为均值50标准差15的正态分布
#### 经济属性
- **主动收入 (income)**: 工作获得的年收入
修改：暂时去掉这一项- **被动收入 (passiveIncome)**: 投资、副业等收入
- **经济贡献 (economicContribution)**: 总收入-总支出
- **子女抚养费 (childCost)**: 缓慢增长，上大学后3w一年，工作后6w一年
修改：一定要完善职业系统，在重要事件“毕业”后变成找工作状态
#### 社会属性
- **职业 (occupation)**: 当前职业
- **教育程度 (education)**: 最高学历
- **伴侣 (partner)**: 配偶对象
- **子女 (children)**: 子女列表

### 3.2 特殊标记系统 (flags)
用于记录特殊状态和历史选择：

#### 教育标记

修改为学历和学校档次
#### 职业标记

修改为上述职业
## 4. 事件系统

### 4.1 事件触发机制 【已实现】
- **触发概率**: 人生阶段事件必然触发，随机事件概率触发
- **事件暂停**: 事件发生时游戏自动暂停
- **选择限制**: 超出经济能力的选择会被禁用

### 4.2 人生阶段事件

#### 婴幼儿期（0-5岁）
- **0岁 - 早教班**
  - 不去: 免费
  - 去早教班: 3万，智力+1，魅力+1

- **3岁 - 贵族幼儿园**
  - 公立幼儿园: 1500元
  - 国际双语幼儿园: 4万，智力+2，魅力+2

#### 小学阶段（6-11岁）
- **6岁 - 小学择校**
  - 普通小学: 免费
  - 买学区房: 30万，6年内每年智力+1
  - 国际小学: 40万，智力+8，魅力+4

- **7-11岁 - 课外补习**（奇数年龄触发）
  - 不上补习: 免费
  - 常规补习: 1万，智力+2，健康-1
  - 奥数: 1万，智力+5，魅力-3，健康-3
  - 兴趣班：3万，智力+1，魅力+3，健康-1
- **8岁 - 才艺比赛**（30%概率）
  - 不参加: 免费
  - 参加比赛: 5000元，魅力+1，智力高于60时额外+1

#### 初中阶段（12-14岁）
- **12岁 - 小升初**
  - 直升对口初中: 免费
  - 民办牛校: 15万，智力+4

- **13岁 - 青春发育**（40%概率）
  - 顺其自然: 免费
  - 医美/牙齿矫正: 3万，魅力+3

- **14岁 - 网瘾问题**（30%概率）
  - 严格禁止: 免费，健康+1，魅力-1
  - 适度放任: 免费，智力-1，魅力+1

#### 高中阶段（15-17岁）
- **15岁 - 中考冲刺**
  - 普通复习: 免费
  - 一对一私教: 3万，智力+3，健康-1

- **15岁 - 高中**（20%概率）
  - 不去: 免费
  - 上国际高中: 45万，智力+3，魅力+6
  - 上重点高中： 1万 智力+6，魅力+3，需智力大于70

- **16岁 - 高中恋爱**（50%概率）
  - 专心学习: 免费
  - 谈恋爱: 免费，智力-1，高考计算正态分布方差变大

#### 大学阶段（18-21岁）
- **18岁 - 高考志愿**（基于智力）
见上
  - 不上大学: 免费，直接工作

- **18岁 - 间隔年**（10%概率）
  - 直接升学: 免费
  - 环球旅行: 5万，魅力+3，健康+2

- **20岁 - 大学创业**（20%概率）
  - 不参与: 免费
  - 参与创业: 15万，成功率为智力加魅力/4，若成功，则获得特殊职业企业加，年薪20w，逐年增长1w，
#### 职场阶段（22-35岁）
下述在上面有体系化修改


- **25-35岁 - 生娃**（45%概率）
  结婚一年后可选择生育，成功率=(双方健康平均值)/100。孩子属性：70%概率为父母平均，30%随机。母亲生育后健康-5。

####机遇####
- **32岁 - 副业投资**（40%概率）
  - 不做副业: 免费
  - 炒股: 10万，40%概率回报20万
  - 奶茶店加盟: 15万，25%概率被动收入+2.5万/年，

#### 中年阶段（45-59岁）
- **45岁 - 中年危机**（80%概率）
  - 混日子: 免费，收入-1万/年
  - 跳槽创业: 30万，30%变为企业家身份，70%概率失业

- **50岁 - 父母养老**（60%概率）
  - 送养老院: 6万/年，
  - 居家请护工: 10万/年，健康+3

#### 老年阶段（60岁以上）
- **60岁 - 退休**
  - 正常退休: 免费，收入变为5万/年养老金
  - 返聘工作: 免费，收入为4份之一，健康-1每年

- **65岁 - 环球旅行**（30%概率）
  - 不去旅行: 免费
  - 环球旅行: 20万，健康+1

- **70岁 - 立遗嘱**（50%概率）
  - 不留遗产: 免费
  - 留房产给子女: 免费，魅力+1

#### 随机小事件
#### 普通随机事件 【已实现】
- **健身年卡**: 25岁以上，5%概率，1万元，健康+1，魅力+1
- **买彩票**: 18岁以上，5%概率（已调低），200元，0.01%概率中奖500万
- **医美抗衰**: 25岁以上，4%概率，2万元，魅力+2，健康-1
- **健康作息**: 15岁以上，10%概率（已调低），5000元，健康+1

#### 突发事件 【已实现】
- **重病**: 65岁后，5%概率，不治疗健康-30，一般治疗20万健康-15，优化治疗50万健康-5
- **意外**: 任意年龄，0.8%概率，健康-100
### 4.3 事件效果系统
- **属性修改**: 直接加减三大属性
- **职业变更**: 改变职业和收入
- **特殊标记**: 设置flags影响后续事件
- **经济影响**: 直接影响全局经济

## 5. 职业系统

### 5.1 职业收入表
见上述
### 5.2 收入计算公式


## 6. 支出系统

### 6.1 基础支出 【已实现】
- **未成年人**: 1.5万 + (70-健康)²×10，健康>70时无额外支出
- **成年人**: 2.8万 + (70-健康)²×10

### 6.2 额外支出
先不要
- **债务利息**: 根据flags.debt计算
- **学区房支出**: 已计入购房成本

## 7. 生育系统

### 7.1 婴儿属性计算 【已实现】
- **属性继承**: 70%概率为父母对应属性平均值，30%概率随机生成
- **属性限制**: 生成后限制在0-100范围内

### 7.2 家庭关系 【已实现】
- 父母双方都会记录子女信息
- 子女记录父母信息
- 子女自动加入游戏人物列表
- 子女抚养费随年龄增长：未成年1.8万/年，大学3万/年，工作后6万/年

## 8. 存档系统 【已实现】

### 8.1 云端存储
- 使用uniCloud数据库存储
- 存档信息包括：当前年份、全局经济、所有人物数据

### 8.2 存档管理
- 手动保存功能
- 存档列表显示年份和经济状况
- 支持加载历史存档

## 9. UI系统 【已实现】

### 9.1 游戏主界面
- 游戏统计信息（年份、经济、人口）
- 游戏控制按钮（开始、暂停、保存、加载、重置）
- 人物卡片横向滚动展示

### 9.2 人物卡片
- 显示年龄、性别、头像、姓名
- 显示职业和年收支贡献
- 显示学历档次和专业信息
- 生存状态指示器

### 9.3 事件选择界面
- 事件描述和人物信息
- 多个选择选项with成本和效果预览
- 经济状况和破产线提醒
- 丰富的事件描述文案

### 9.4 人物详情界面
- 基本信息（年龄、性别、职业、教育、专业、工作年限）
- 三大属性进度条显示
- 经济状况和家庭关系
- 退休和求职状态显示

## 10. 数据结构

### 10.1 人物对象结构 【已实现】
```javascript
{
  id: String,              // 唯一标识
  name: String,            // 姓名
  age: Number,             // 年龄
  gender: String,          // 性别（男/女）
  health: Number,          // 健康值（0-100）
  charm: Number,           // 魅力值（0-100）
  intelligence: Number,    // 智力值（0-100）
  economicContribution: Number, // 年经济贡献
  income: Number,          // 主动收入
  childCost: Number,       // 子女抚养费
  isAlive: Boolean,        // 是否存活
  partner: Object,         // 伴侣对象
  children: Array,         // 子女列表
  occupation: String,      // 职业
  education: String,       // 教育程度
  schoolLevel: String,     // 学校档次（二本/双非/211/985）
  major: String,           // 专业
  workYears: Number,       // 工作年限
  jobSeeking: Boolean,     // 是否在找工作
  lastPromotionYear: Number, // 上次升职年份
  isRetired: Boolean,      // 是否退休
  flags: Object           // 特殊标记
}
```

### 10.2 事件对象结构
```javascript
{
  person: Object,          // 触发事件的人物
  type: String,            // 事件类型
  options: Array          // 选择选项列表
}
```

### 10.3 选项对象结构
```javascript
{
  text: String,            // 选项描述
  cost: Number,            // 费用
  effects: Object,         // 属性效果
  special: String          // 特殊效果标识
}
```

## 11. 游戏平衡性设计 【已实现】

### 11.1 经济平衡
- 初期投资教育成本高但长期收益大
- 不同职业路径有不同的风险收益比
- 生育增加支出但可能带来未来收益
- 健康低于70时医疗支出指数增长

### 11.2 属性平衡
- 三大属性相互影响不同的人生选择
- 健康影响寿命和医疗支出，70岁后自动衰减
- 智力主要影响教育和收入能力
- 魅力影响婚恋成功率和特定职业升职

### 11.3 风险管理
- 创业、投资等高风险高回报选择
- 稳定职业低风险稳定回报
- 债务容忍机制给予30万缓冲额度
- 随机事件概率已调整平衡

## 12. 游戏当前状态

### 12.1 已完成功能
✅ 完整的30职业体系与40+专业系统  
✅ 高考算法与学历档次系统  
✅ 求职、升职、择偶、生育完整流程  
✅ 正态分布属性生成系统  
✅ 辍学处理与自动进入求职状态  
✅ 事件概率平衡调整（买彩票5%，健康作息10%）  
✅ 时间系统调整为2秒/年  
✅ 完整的UI显示系统包括学历专业信息  
✅ 云端存档系统  

### 12.2 游戏特色
- 高度真实的人生模拟体验
- 基于统计学的属性和事件系统
- 多代家族经营玩法
- 丰富的职业发展路径
- 平衡的风险收益机制

---

*本文档记录了游戏的所有核心机制，所有标记【已实现】的功能均已完成开发并测试通过。*