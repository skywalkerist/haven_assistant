中国家庭卡牌模拟游戏 · 完整实现方案（MD 版，无代码）
本文档面向从零复刻本项目的人：不假设任何既有记忆或上下文。包含目录结构、数据模型、系统算法、事件定义、数值与概率、UI 交互约束、调度规则与验证方法。严格不含可执行代码，只提供文字与数字说明。按本文逐条实现，即可得到与现有版本“一模一样”的系统行为。
1. 核心定位与设计原则
1.1 游戏概述
类型：事件驱动的家庭模拟（卡牌式选项 → 影响人物与家庭现金）。
节奏：3 秒 = 1 年。
目标：在中国语境下，体验“房子、票子、孩子”的长期权衡。
计分：仅以**家庭现金（globalEconomy）**衡量“游玩水平”；房产不计入分数，只影响支出/教育环境/事件分支。
1.2 关键约束
唯一事件源：所有事件只在 systems/events.js 定义；其他模块仅做计算，不直接弹窗。
人均限流：每人每年最多 1 个重要（major）+ 2 个普通（normal） 事件。互不抢占（姐姐结婚不会卡住弟弟就业）。
家庭级事件：如迁居/购房/法拍/利率等，只在户主身上触发，且不占用其他人的配额。
未成年人保护：未成年人不触发成人向事件（购房、按揭、就业、退休等）。
迁移不能直接点选：地域改变来源于事件（高考外地、就业外地、成本压力、养老回流），玩家在事件中选择。
教育不直加智力：幼儿园/补习等不再直接 + 智力，统一改为“学习时长 → 压力 → 阶段产出（影响升学与竞争力）”。
UI 极简：仅 Modal（重要） + Bottom Sheet（普通）；无侧栏日志，无铃铛红点。
2. 目录结构与职责（不含代码）
store/
  gameStore.js               # 主状态：年份推进、逐人限流、事件队列、UI 驱动、经济结算
systems/
  config.js                  # 通用常量（时间倍率、Clamp 范围等）
  config-economy.js          # 经济常量（各地区单价/租金/生活成本/养老金区间等）
  constants.js               # 本项目硬常量（死亡率曲线、学区系数、法拍参数等）
  persons.js                 # 人物工厂与继承（婴儿/伴侣/户主判定）
  stress.js                  # 学习时长注入、年度恢复、倦怠判定
  education.js               # 高考分、档次、阶段产出到“学校层级/竞争力”的映射
  employment.js              # 求职机会生成、成功率、起薪、升职、主动离职
  industry.js                # 行业景气（0.6~1.2），影响求职/升职/薪资封顶
  economy.js                 # 年度结算（收入、支出、房贷、随机支出、破产检测）
  finance.js                 # 医疗/人情/罚单/诈骗等开销分布
  housing.js                 # 购房/租房/换房/按揭/重定价/违约/法拍（家庭级）
  migration.js               # 迁移建议与应用（家庭级，只对户主）
  mortality.js               # 年度死亡概率与后续（丧葬、心理冲击）
  events.js                  # ★唯一事件池、概率修正、户主限定、冷却与 UI 规范
data/
  careers.json               # 职业包（名称、教育要求、薪资上下限、行业类别）
  majors.json                # 专业包（用于大学/读研）
  cities.json                # 各档地域的城市名池（rural/county/city/mega）
说明：只有 events.js 定义“事件内容与概率”；其他模块不得弹窗（只返回数值/效果）。
存档/云存储可按项目需要增补（与本设计无耦合）。
3. 世界与地域
3.1 地域档位
rural（农村）、county（小县城）、city（城市）、mega（超一线）。
城市名池（同档随机展示，玩法等价）：
rural：广汉、肥东、沂水、泗水、霍邱、修水
county：如皋、义乌、靖江、海宁、晋江、昆山、常熟
city：合肥、杭州、成都、西安、武汉、青岛、苏州、南京
mega：北京、上海、深圳、广州、杭州、天津
3.2 价格与成本（建议默认）
指标	rural	county	city	mega
单位房价（元/㎡）	6,000	12,000	25,000	60,000
月租基准（元）	800	1,500	2,400	6,000
成人年生活成本（元）	12,000	18,000	30,000	48,000
学区房/租金倍数：none=1.0、avg=1.2/1.3、good=1.4/1.6、top=1.8/2.0。
家庭规模加成：第二人 +30%，每多一人 +20%（未成年按 0.6 人头计）。
生活方式爬升：每 5 年 ×1.05。
3.3 房贷假设
首付 35%；年化 4.6%±0.2%；期限 30 年；等额本息。
连续逾期：1~2 年=警告，3 年=法拍（70%~85% 市价）。
4. 数据模型（字段与范围）
下文均为数据字段定义（非代码）。实现时做对应字段的读写与 Clamp。
4.1 Person（人物卡）
身份：id、name、age（整数年）、gender（男/女）、isAlive（布尔）
先天/核心（0~100）：intelligence（智力）、charm（魅力）、health（健康）
合并后关键（0~100）：
ambition（野心：含风险偏好）
strain（综合压力）
competitiveness（竞争力）
tenacity（韧性）
psyche（心理健康）
行为/经历：education（未入学/二本/双非/211/985/硕士/硕士在读…）、schoolLevel（二本/双非/211/985）、major
职业态：occupation（职位名）、income（年收入，整数元）、workYears（在职年数）、isRetired
偏好（0~1）：prefGov（体制）、prefCorp（大厂/企业）、prefStartup（创业）
关系：partner（指向伴侣卡或空）、children（人物数组）、parents（两人或空）
求学/履历层级（0~2）：internTier、researchTier、leaderTier
标记：jobSeeking、lastPromotionYear、flags.*（倦怠、读研入学年、返聘、渐退等）
4.2 家庭资产与世界状态
familyAssets.housing：
mode（none|rent|own）
regionType（rural|county|city|mega）、cityName
schoolTier（none|avg|good|top）
area（㎡，默认 80）
buyYear、currentPrice、priceIndex
annualMortgage（年供；own 时有值）
mortgage.arrears（逾期年数）
worldState：regionType、cityName、economicCycle（行业宏观乘数 0.6~1.2）
globalEconomy：家庭现金（整数元）
4.3 事件（events.js 内部结构定义）
基本：id、title、icon、importance（major|normal）、cooldownYears（整数≥1）
范围：scope（personal 或 household；家庭级仅对户主生效）
UI：ui（modal=重要阻断；sheet=普通底部）
触发：when（文字条件：如“age≥25 且有职业且 !isRetired”）、baseProb（0.0~1.0）
修正：adjustments（描述依赖：地区、压力、心理、家庭状态、行业景气、冷却）
选项数组：每项包含
text（按钮文案）
cost（整数元；从家庭现金扣）
effects（仅限白名单字段：见 §8.3）
可选 meta（动作钩子标识，如“申请岗位”“查看房源”“签合同”等）
5. 时间推进（年度主循环）
3 秒 = 1 年。每年运行以下步骤（顺序重要）：
A. 年份 +1；清零每人当年事件计数：majorUsed=0, normalUsed=0。
B. 更新行业景气乘数（economicCycle 与分行业因子），影响求职/升职/薪资封顶。
C. 住房价格指数按 regionType+schoolTier 演化，用于换房/法拍估值。
D. 逐人处理（仅 isAlive）：
年龄 +1；如在职且未退休：workYears +1。
企业家：每年固定收入 +1 万（可被失败事件清零）。
满意度→主动离职（若 satisfaction<35 或两年无升职且 strain>75，年末 20% 概率离职）。
压力系统：年度自然恢复（见 §6.2）；若去年 strain>85，本年“倦怠”→所有表现 ×0.8。
事件候选筛选：
先评估重要事件（满足 when 条件）→ 以 baseProb + adjustments 采样 → 每人最多 1 个，入队；
再评估普通事件→ 每人最多 2 个，入队；
家庭级事件仅对户主评估（是否入队与其他人无关，且不占用他们的配额）。
E. 家庭年度经济结算（§7）：收入合计 − 各类支出；处理按揭年供、逾期计数、法拍与破产线。
F. 依次展示事件队列：
重要（modal）逐个阻断；普通（sheet）可堆叠但一次只显示一个。
G. 退休与死亡：触发提前/渐进/强制退休、返聘机会；按死亡率判定并执行丧葬与心理冲击。
H. 结束态判断：若全员死亡或家庭现金 ≤ -300,000 → 游戏结束弹窗。
6. 学习与教育链
6.1 学习时长与年收益（不直改智力）
所有“早教/补习/竞赛/自习”等只产生学习时长（小时/年），以及压力/金钱副作用。
年度教育收益（“阶段成果点”，影响升学与竞争力）：
基础：0.06 × 学习时长（小时）
高韧性（tenacity>60）×1.10；心理低（psyche<40）×0.85
边际递减：学习时长>300 小时后，每 +100 小时收益系数 ×0.85
压力注入：每 50 小时学习 → strain +3；每额外 100 小时 +1（递增）。
倦怠判定：上一年 strain>85 → 本年“倦怠”：学习/升职/求职表现 ×0.8。
6.2 升学节点（事件触发条件说明）
小升初/初升高：使用阶段成果点+ 学区加权（见 §9.4）决定“普通/重点/国际”等分支（仅改变后续概率与费用，不改智力）。
高考（18 岁必然事件）
分数（0~100）：
0.55×智力 + 0.20×竞争力 + 0.15×(100-压力) + 0.10×动机 + 噪声N(0,7) 后 Clamp。
档次阈值：≥78=985；≥62=211；≥45=双非；否则=二本/专科。
录取地域建议（概率）：985→ 65% mega/35% city；211→ 60% city/20% mega/20% home；双非→ 60% county/40% city；二本→ county/rural。
选择：不上大学（直接求职）/ 选择院校+专业（给 4 个专业）。专业只在“求职匹配度”中生效。
读研（22 岁，层次≥双非）
成功率：
Clamp[0,0.95](0.15 + (竞争力-50)/200 + 0.12×科研层级 + 0.05×干部层级 + 院校溢价(985+0.28/211+0.16/双非+0.06) - max(0,压力-70)/200)
成功→“硕士在读”（两年后自动毕业求职）；失败→进入求职。
7. 就业链（求职→入职→升职/离职）
7.1 求职机会生成（每次 3~4 个）
保底：体力活（成功率 90%，低薪）。
1 个与专业匹配的岗位（若有专业）。
1 个区域优势岗位（体制/大厂视地域）。
1 个中性岗位。
7.2 求职成功率
`p = Clamp[0.01,0.95] (
0.35
学历（硕士+0.08，本科+0.04；985+0.12，211+0.06）
专业匹配(+0.10) / 不匹配(-0.15)
履历层级(实习×0.05 + 科研×0.04 + 干部×0.03)
(竞争力-50)/200 + (动机-50)/300
路径偏好匹配(大厂/体制/创业契合 +0.05；背离 -0.03)
行业景气（0.61.2 换算为 -0.10+0.10）
压力惩罚(max(0,压力-70)/200)
)`
7.3 起薪估计
起薪 ≈ 职业区间的 40%~80%分位 × 地域乘数(rural0.6/county0.8/city1.0/mega1.3) × 学历乘数(硕士1.10/本科1.00/专科0.85) × 院校溢价(985+10%/211+5%)。
7.4 升职（在职≥3 年，每 3 年评估一次）
p_promote = Clamp[0.01,0.95] ( 0.10 + (竞争力-50)/200 + (动机-50)/300 + 院校溢价(985+0.08/211+0.05) - max(0,压力-70)/200 ) × 行业景气(0.5~1.2) × 倦怠(0.8/1)
加薪：该职业 min~max 区间的 10%~15%，不超“景气封顶”。
7.5 主动离职
年终检查：满意度<35 或 连续两年零升职且 压力>75 → 20% 概率主动离职；收入清零、转“求职中”；心理 -3、压力 +2。
8. 经济与现金流（globalEconomy）
8.1 收入
在职者年收入合计 + 被动收入（如副业） + 养老金 + 返聘补贴。
8.2 支出
生活成本：§3.2 表 + 家庭规模加成 + 生活方式爬升（每 5 年 ×1.05）。
医疗支出：基于年龄/健康（常年 0.8~2 万/人）。
随机支出：人情（3k8k）、罚单（200500）、诈骗（5k3 万）、突发医疗（0.86 万）。
住房：租金（基准×学区×12）或按揭年供。
子女隐形成本：未成年每人 +2,000/年。
8.3 效果白名单（事件 effects 允许的字段）
人物属性（Clamp 到 0~100）：health、charm、intelligence、ambition、strain、tenacity、psyche、competitiveness、motivation
职业态：occupation、income（绝对或乘数，需标注）、jobSeeking、isRetired
偏好（Clamp 到 0~1）：prefGov、prefCorp、prefStartup
家庭现金：cash（±整数元）
标记：flags.{任意键}=值（如 burnoutThisYear、gradSchoolStartYear、rehired 等）
家庭资产：通过“动作”完成（如“buy_house_contract”“rent_sign”），不直接在 effects 中修改复杂结构。
说明：任何未在白名单内的字段不得由事件直接写入，避免状态污染。
8.4 破产线
家庭现金 ≤ -300,000 → 破产结束。若持有“老学区房”，先尝试变现/法拍再判断。
9. 住房与迁移（家庭级，仅户主）
9.1 户主定义
家庭出生第一人即为户主。若死亡，配偶继任；如无配偶，年龄最大的在世家庭成员继任。
9.2 结婚→住房决策
若家庭 housing.mode=none：结婚后触发“结婚住房选择”事件（租普通/租学区/买房（三档））。
购房：总价 = 单位房价 × 面积(80㎡) × 学区倍数；首付 35% 从家庭现金扣；生成按揭（利率、年供见 §3.3）。
9.3 换房与学区升级
学区 none→avg（约 80 万）/ avg→good（约 120 万）；面积升级（+30㎡，约 50 万）。
换房断链：当年发生过桥费（0.8~2.5 万）、压力 +8。
9.4 学区影响（不直改智力）
对未成年人的学习收益系数：none ×1.00 / avg ×1.05 / good ×1.10 / top ×1.15。
9.5 利率重定价、违约与法拍
利率：政策/市场事件触发 ±0.2% 微调，允许转按揭。
逾期：1~2 年=警告；3 年=法拍（70%~85% 市价），净额入家庭现金；全家心理 -15、压力 +20；住房重置为 none。
9.6 迁移（必须来源于事件）
来源：高考外地（个人学习地域，不等于家庭迁居）、外地就业（给“全家一起迁移”选项）、生活成本压力（建议降级）、养老回流（55+）。
迁入 mega：全家压力 +10；迁回 county/rural：全家压力 -5、心理 +3；搬家成本 3~8 万。
迁移后：worldState.regionType & cityName 更新；住房估值重算。
10. 婚恋、生育与继承
10.1 择偶
候选 3 人，显示（魅力、收入）；成功率 ≈ 自身魅力 / max(对方[健康/魅力/智力], 收入/5k×2)，Clamp[0.05,0.95]。
婚礼支出：5~20 万一次性。
10.2 生育
结婚满 1 年后，女方 <40（或伴侣 <45）每年 20% 触发展示“生育决定”。
成功率：父母健康均值/100（Clamp[0.3,0.9]）。成功→生成婴儿；母体健康 -3~-5。
10.3 婴儿属性继承（你指定方案 + 微调）
先天可遗传（智力/魅力/野心）：
50% = 父母均值 ±5 扰动；50% = N(50,15) 截断到 [0,100]。
后天可改变（动机/韧性/心理/竞争力）：全部随机 N(50,15) 截断到 [0,100]。
婴儿健康初始 Clamp 到 [60,100]。
11. 心理与压力
11.1 年度恢复
基础恢复：strain -8；psyche +2。
韧性修正：tenacity>60 → strain 再 -2；tenacity<40 → strain 再 +2（或恢复减半）。
倦怠年（上一年 strain>85）：本年学习/升职/求职表现 ×0.8。
11.2 心理事件
焦虑波动（普，年基准 10%）：运动/作息 vs 逃避。
心理健康预警（重，冷却 2~3 年）：咨询/就医 vs 观望。
团辅/正念：低成本，心理 +3~+5，压力 -3~-4。
12. 退休与死亡
12.1 退休
5560：提前退休（养老金系数 0.81.0；55 岁取 0.8，线性上升至 60 的 1.0）。
62~65：渐进退休（半工时，收入 ×0.6，压力降低）。
65：强制退休；养老金 = P_base × 地区系数（Clamp 到 2.5~7 万/年；地区系数 rural0.8/county0.9/city1.0/mega1.2）。
返聘：退休后每年 20% 概率获得 2 万补贴。
12.2 死亡概率（年度）
p_year = p_age(age) × p_health(health) + p_accident：
p_accident = 0.0002（0.02%）
p_age：65=0.8%、70=1.5%、75=3%、80=6%、85=10%（中间插值）
p_health：以 50 为 1.0；每 -10 健康 ×1.25；每 +10 ×0.8
执行后续：丧葬支出（rural 2 万 / county 3 万 / city 4 万 / mega 5 万）、配偶/子女心理 -8~-12、压力 +4~+6；遗嘱根据标记执行象征性转移（如教育基金 2 万）。
13. 事件系统（唯一在 systems/events.js）
13.1 人均限流与队列
每人每年：重要 ≤1，普通 ≤2。
家庭级事件（scope=household）仅对户主评估，不影响其他人的配额。
队列处理：重要（modal）逐个阻断；普通（sheet）可排队（同时间显示 1 个）。
13.2 事件基础概率与修正
每个事件定义：baseProb（0~1）+ cooldownYears（≥1）。
adjustments 统一口径（示例）：
年龄段因子（如 30~45 岁的“成本压力” +0.05）
地域因子（迁入 mega 的“裁员风波” +0.03）
压力/心理因子（压力高的心理预警 +0.06）
家庭状态（已婚/有孩/有房/房贷）
行业景气（裁员基准按 1-景气系数放大）
13.3 UI 规范
重要事件：ui=modal，两按钮（主选项/次选项）。
普通事件：ui=sheet，多按钮；关闭即放弃（当年不再重触发）。
事件本身不调用系统弹窗，只返回数据；由 gameStore 驱动 UI。
13.4 必备事件清单（每类至少示例，便于复刻）
下表为必须上线的代表事件（名称/范围/基准概率/冷却/条件/选项与效果范围）。实际实现时，请将所有文本、费用与效果精确录入 events.js。
注：效果字段仅用 §8.3 白名单，费用均从 globalEconomy 扣，数值单位为元。
A. 大学线（个人）
学习低潮（normal，base 8%，cd 1）：大学或硕士在读；
选项：硬拉（压力+10、心理-2、竞争力+24）/ 作息（压力-5、心理+2、竞争力+12）/ 摆烂（压力-8、心理+3、竞争力-1）
逃课诱惑（normal，6%，cd1）：大学；
拒绝自习（动机+3、竞争力+2、心理-1）/ 只玩1小时（心理+2）/ 通宵（竞争力-2、压力+5、心理+3）
过劳预警（major，6%，cd2）：大学或实习/兼职；
休整一月（压力-15、心理+6、竞争力-1、-2,000）/ 咬牙坚持（压力+10、心理-4、竞争力+2）
学生干部竞选（normal，5%，cd1）：大学；
参选（竞争力+2、魅力+2、压力+3）/ 婉拒（心理+1）
竞赛获奖（normal，4%，cd1）：有学习时长>200；
冲击更高（动机+3、竞争力+3、压力+4）/ 稳住（竞争力+2）
导师压迫（major，3%，cd3）：硕士在读；
换组（压力-8、心理+4、竞争力-1）/ 忍耐（压力+8、心理-5、竞争力+2）
感情变故（normal，5%，cd1）：大学 + 恋爱标记；
修复（心理-1、压力+2、动机+1）/ 分手（心理-3、压力+4、动机+2，清除恋爱标记）
B. 职场线（个人）
猎头来电（normal，6%，cd1）：在职；
面谈（竞争力+1、动机+1）/ 婉拒（心理+1）
绩效谈话（normal，8%，cd1）：在职；
接受挑战（动机+2、压力+2）/ 争取资源（动机+1、竞争力+1）
裁员风波（major，3%，cd3）：在职；
内部转岗（roll：成功保住工作、收入-5%；失败失业、-20,000、压力+6）/ N+1（失业、+15~30k、压力+8）
多 Offer 冲突（major，3%，cd2）：在职或求职中；
高薪高压（收入+12%、压力+8、心理-2、动机+2）/ 稳定成长（收入+5%、压力+2、心理+2）
试用危机（major，4%，cd2）：在职且 workYears≤1；
沟通（roll：成功保住、压力+2；失败失业、压力+6、心理-3）/ 体面离开（失业、心理+1）
小失误（normal，7%，cd1）：在职；
连夜补锅（压力+4、竞争力+1）/ 主动复盘（韧性+2）
微幅调薪（normal，5%，cd1）：在职；
心理+2、收入+3%
C. 家庭线（个人）
家庭矛盾（normal，6%，cd1）：有伴侣；
分工表（心理+2、压力-2、-200）/ 冷战（心理-3、压力+4）
备孕不顺（major，4%，cd2）：已婚、无孩、年龄≥25；
就医（-5,000、心理+2）/ 顺其自然（心理+1、动机-1）
孩子生病（normal，6%，cd1）：有未成年子女；
三甲（-2,000、压力+2、心理-1）/ 社区（-500）
赡养压力（major，4%，cd2）：家中老人≥75；
护工（-12,000、压力+2、心理+1）/ 轮流（压力+6、心理-1）
家庭旅行（normal，5%，cd1）：已婚；
短途（-2,000、心理+3、压力-2）/ 不去（心理-1）
D. 财务线（个人）
人情开支（normal，6%，cd1）：全年；
礼到位（-38k、魅力+1）/ 量力而行（-13k）
基金回撤（normal，5%，cd1）：持有基金标记；
止损换债（+2~8k、心理+1）/ 继续持有（心理-1）
突发医疗（major，3%，cd3）：全年；
医保商保（-0.82万、心理-1）/ 自费（-26万、心理-2）
交通罚单（normal，5%，cd1）：全年；
缴纳（-200~500、动机+1）
电诈（major，2%，cd3）：全年；
反诈学习（心理+2）/ 中招（-5k~3万、心理-4）
E. 住房&政策（家庭级，仅户主）
房东涨租（normal，6%，cd1）：mode=rent；
续租（-2.47.2k、压力+2）/ 换房（-38k、压力+4，设置换房标记）
业主大修（normal，5%，cd1）：mode=own；
缴纳（-3~12k）
换房断链（major，3%，cd2）：换房标记；
过桥（-0.8~2.5k、压力+4）/ 暂缓（心理-1）
利率调整（normal，5%，cd1）：全年；
转按揭（设置“考虑重定价”标记、心理+1）/ 观望
F. 心理（个人）
焦虑波动（normal，10%，cd1）：全年；
运动作息（-300、压力-6、心理+3）/ 短期逃避（心理+1、动机-1）
心理健康预警（major，5%，cd2）：全年；
就医咨询（-2,000、心理+10、压力-12）/ 观望（心理-5）
团辅（normal，6%，cd1）：全年；
报名（-200、心理+5、压力-4）/ 不参加
正念训练（normal，6%，cd1）：全年；
坚持（心理+4、压力-3、动机+1）/ 浅尝（心理+1）
G. 迁移（家庭级，仅户主）
城市迁移（normal，6%，cd1）：25~45 岁且在职；
上行至 mega（-8万、压力+8、野心+2）/ 回 city/county（-5~3万、压力-5、心理+3）/ 保持
生活成本压力（normal，5%，cd1）：30~45 岁、压力≥70、有房贷或高房租；
降级建议（触发迁移提案）/ 先扛着（心理-1）
养老回流（major，6%，cd3）：55+，有配偶/子女；
回流（执行迁移）/ 暂不考虑
H. 健康&老年（个人）
慢性病（normal/major，≥70 岁，cd2）：
积极治疗（-8万、健康-5、压力+3）/ 保守（-2.5万、健康-10、压力+1）/ 不治（健康-20）
跌倒骨折（normal/major，≥75 岁，cd2）：
手术（-4万、健康-8、魅力-2）/ 保守（-1.5万、健康-15、魅力-5）
安宁疗护（normal/major，≥80 岁 & 健康<30，cd2）：
居家（-6万、健康+5、心理+8、压力-10）/ 医院（-12万、健康+3、心理+3）/ 基础（-2万、健康+1、心理-2）
I. 机会类（个人）
副业投资（normal，5%，cd2）：
炒股（+20 万或亏完 10 万，50/50）
奶茶加盟（成功：+2.5 万/年被动；失败：亏 15 万，25/75）
彩票（normal，3%，cd1）：
中 500 万（1% 概率）/ 未中（-200）
提示：高考、读研、择偶、结婚、生育、退休 属于“必然/门槛事件”，其触发由 gameStore 的“重要事件列表”控制（在相应年龄/条件满足时直接入队），并在 events.js 以同名事件提供选项定义与后续效果。
14. UI 交互规范（无组件代码）
HUD：左侧年份；中间“地域·住房状态（租/买·学区）”；右侧家庭现金。
重要事件（modal）：标题、图标、正文、两个按钮（主/次）；点击后返回效果，游戏继续。
普通事件（sheet）：标题+描述+多按钮；可“稍后处理”（关闭即放弃）。
没有事件日志侧栏、铃铛红点、花火线等额外 UI。
各“展示”由 gameStore 的当前事件状态字段驱动，事件本身不直接 UI 调用。
15. 平衡基线与目标
开局家庭现金：中位 500,000 元。
不买房也能顺利通关；买房带来教育收益系数和稳定预期，但现金压力更大。
985→大厂线：高收益/高风险/高压力；体制线：低波动/慢增长/好心理。
破产率（全样本）：< 8%；
终局家庭现金（不含房产）：城市线 80~200 万（标准差较大）。
16. 开发落地顺序（强烈建议按序）
清理旧事件：仅保留 systems/events.js 为唯一事件源；删除/停用任何“幼儿园/早教直接+智力”类逻辑。
搭主循环：按 §5 顺序搭建年份推进、逐人限流、家庭级事件仅户主、事件队列的 Modal/Sheet 分发。
接系统：
stress（学习→压力→产出、年度恢复/倦怠）
education（高考分/档次/读研）
employment（求职/起薪/升职/主动离职）
economy/finance（生活成本/随机支出/医疗/年供/破产）
housing（购租/换房/重定价/违约/法拍）
migration（迁移提案与应用，仅户主）
mortality（死亡率、丧葬、心理冲击）
填事件：将 §13 的代表事件完整录入 events.js（文本、条件、基准概率、冷却、效果）。
数值校准：
回放 1000 局（可写离线脚本）观测破产率/终局现金/子女 985 率/法拍率。
调 baseProb、cooldown、阈值与各系数，直至达成 §15 目标。
验收用例：见 §18。

18. 验收与测试清单（建议逐项自测）
人均限流：任意一年，任意人物，重要≤1、普通≤2；他人事件不相互占用。
户主专属：仅户主出现“房东涨租/利率调整/换房断链/迁移提案”；家庭迁移后所有成员地域随之改变。
教育链：
0~17 岁无“直接+智力”的事件；学习只产生“时长/压力/费用”。
18 岁必出“高考”，档次与分数随“压力/竞争力/动机/智力”变化。
22 岁按档次出现“读研选择”。
就业链：
第一次求职含“体力活”保底；匹配专业/区域岗位显著提高成功率与起薪。
在职≥3 年，3 的倍数年触发一次“升职评估”。
住房与法拍：
结婚且无房 → 触发“结婚住房选择”；买房生成按揭；年供正常扣。
连续 3 年逾期 → 法拍，心理 -15、压力 +20、住房置空。
迁移：
就业异地时可选“本人先去/全家迁移/放弃机会”；迁入 mega 压力+10。
30~45 岁、压力高时出现“成本压力”→降级提案。
心理：高压力显著提高心理预警概率；就医/正念等能稳定回升。
退休与死亡：
5560 进入“提前退休”选择、6265“渐进”、65 强退 + 养老金。
死亡按曲线发生，执行丧葬与亲人心理冲击。
破产：家庭现金 ≤ -300,000，若无可变现资产则直接结算游戏。
终局：全员死亡或破产任一成立 → 弹“游戏结束”并展示统计。
19. 数据附录（关键常量一览）
房价/租金/生活成本：见 §3.2。
学区倍数：none 1.0 / avg 1.2/1.3 / good 1.4/1.6 / top 1.8/2.0。
房贷：首付 35%，年化 4.6%±0.2%，期 30 年；法拍 70%~85%。
生活方式爬升：每 5 年 ×1.05；家庭规模加成：第 2 人 +30%，其后每人 +20%（未成年 0.6 人头）。
学习收益：0.06 × 时长，韧性>60 ×1.10，心理<40 ×0.85，>300 小时边际递减 ×0.85/100h；每 50h 压力 +3（+递增）。
高考档：≥78=985；≥62=211；≥45=双非；其余二本/专科。
就业成功率：配方见 §7.2；升职见 §7.4。
养老金：基准 2.5~7 万/年 × 地区（rural 0.8/county 0.9/city 1.0/mega 1.2）。
死亡率：65=0.8%，70=1.5%，75=3%，80=6%，85=10%（健康修正 ×1.25/×0.8）。
丧葬费：rural 2 万 / county 3 万 / city 4 万 / mega 5 万。
破产线：-300,000 元。
20. 常见误区与规约（务必遵守）
不要在除 events.js 外的任意模块生成“弹窗/选项”。
不要在任何事件中直接修改复杂对象（如整个 housing），必须通过动作钩子走 housing.js 的流程。
不要超出效果白名单写字段，避免状态污染和难以复盘。
不要让“幼儿园/补习”等直接加智力。
不要允许玩家用“按钮”直接改城市；一切地域变化来自事件流程。